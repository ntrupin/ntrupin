<header class="top-nav fade-in">
  <nav id="nav" class="top-nav-links" aria-label="Primary">
    {% for url, data in links.items() %}
    {% set external = data.external if data.external is defined else false %}
    {% set normalized = url if url.endswith('/') else url + '/' %}
    {% set is_active = (not external) and (request.path == normalized or (normalized != "/" and request.path.startswith(normalized))) %}
    <a
      href="{{ url }}"
      class="nav-link"
      data-active="{{ 'true' if is_active else 'false' }}"
      {% if external %}target="_blank" rel="noopener noreferrer"{% endif %}
    >
      {{ data.name }}
    </a>
    {% endfor %}
  </nav>
</header>

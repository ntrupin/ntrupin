{% extends "base.jinja" %}
{% block content %}
<script defer src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
<section class="article-page project-page">
  {% if g.user != None %}
  <a class="button-link" href="{{ url_for('projects.update', id=project.id) }}">Edit</a>
  {% endif %}
  <h1 class="title page-title">
    {{ project.title }}
    {% if project.public == false %}
    <span class="badge-private">Private</span>
    {% endif %}
  </h1>
  <div class="article-meta">
    <p>
      {% if project.started_on and project.ended_on %}
      {{ project.started_on.strftime("%B %Y") }} - {{ project.ended_on.strftime("%B %Y") }}
      {% elif project.started_on %}
      {{ project.started_on.strftime("%B %Y") }} - Present
      {% elif project.ended_on %}
      Through {{ project.ended_on.strftime("%B %Y") }}
      {% else %}
      {{ project.published_at.strftime("%B %d, %Y")  }}
      {% endif %}
      {% if project.published_at != project.updated_at %}
      | Updated {{ project.updated_at.strftime("%B %d, %Y") }}
      {% endif %}
    </p>
  </div>

  <section class="project-hero" aria-labelledby="project-summary-heading">
    <h2 id="project-summary-heading" class="section-title">Project summary</h2>
    {% if project.summary %}
    <p class="project-summary">{{ project.summary }}</p>
    {% endif %}

    {% if project.started_on or project.ended_on or project.status or project.stack or project.project_url or project.repo_url %}
    <div class="project-facts">
      {% if project.started_on or project.ended_on %}
      <div class="project-fact">
        <p class="project-fact-label">Timeline</p>
        <p class="project-fact-value">
          {% if project.started_on and project.ended_on %}
          {{ project.started_on.strftime("%B %Y") }} - {{ project.ended_on.strftime("%B %Y") }}
          {% elif project.started_on %}
          {{ project.started_on.strftime("%B %Y") }} - Present
          {% elif project.ended_on %}
          Through {{ project.ended_on.strftime("%B %Y") }}
          {% endif %}
        </p>
      </div>
      {% endif %}

      {% if project.status %}
      <div class="project-fact">
        <p class="project-fact-label">Status</p>
        <p class="project-fact-value">{{ project.status }}</p>
      </div>
      {% endif %}

      {% if project.stack %}
      <div class="project-fact">
        <p class="project-fact-label">Stack</p>
        <p class="project-fact-value">{{ project.stack }}</p>
      </div>
      {% endif %}

      {% if project.project_url or project.repo_url %}
      <div class="project-fact">
        <p class="project-fact-label">Links</p>
        <p class="project-fact-value project-links">
          {% if project.project_url %}
          <a href="{{ project.project_url }}" target="_blank" rel="noopener noreferrer">Live project</a>
          {% endif %}
          {% if project.repo_url %}
          <a href="{{ project.repo_url }}" target="_blank" rel="noopener noreferrer">Source code</a>
          {% endif %}
        </p>
      </div>
      {% endif %}
    </div>
    {% endif %}
  </section>

  {% if project.content %}
  <section class="project-notes" aria-labelledby="project-notes-heading">
    <h2 id="project-notes-heading" class="section-title">Notes</h2>
    <article class="prose">
      {{ project.html | safe }}
    </article>
  </section>
  {% endif %}
</section>
<script src="{{ url_for('static', filename='js/math.js') }}"></script>
{% endblock %}
